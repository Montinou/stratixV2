---
name: Implement Initiatives Page Real Data
status: open
created: 2025-10-01T02:51:14Z
updated: 2025-10-01T03:09:41Z
github: https://github.com/Montinou/stratixV2/issues/97
depends_on: [001, 002]
parallel: true
conflicts_with: []
---

# Task: Implement Initiatives Page Real Data

## Description
Replace mock data in the Initiatives page with real database queries using Neon PostgreSQL. Implement service layer to fetch initiatives with objective relationships, proper multi-tenant isolation, display empty states when no data exists, and show real-time statistics in the stats cards.

## Acceptance Criteria
- [ ] Service file created: `lib/services/initiatives-service.ts`
- [ ] Page updated: `/app/tools/initiatives/page.tsx`
- [ ] Mock data array removed completely
- [ ] Empty state tested (displays when no data)
- [ ] Multi-tenant isolation verified (User A cannot see User B's data)
- [ ] Stats cards show real counts
- [ ] All data displays correctly with proper formatting
- [ ] Performance <2s with 100+ records
- [ ] TypeScript build passes with no errors

## Technical Details

### Service Implementation
Create `lib/services/initiatives-service.ts` with the following functions:

```typescript
export async function getInitiativesForPage(organizationId: string) {
  // Query initiatives table with INNER JOIN to objectives
  // LEFT JOIN to profiles for owner information
  // Include: id, title, description, status, objective_title, owner_name, progress, due_date
  // Filter by organization_id for RLS
  // Order by created_at DESC
}

export async function getInitiativeStats(organizationId: string) {
  // Return aggregate stats: total, active, completed, blocked
  // Calculate from status field
}
```

### Database Tables
- Primary: `initiatives`
- Join: `objectives` (INNER JOIN for objective_title)
- Join: `profiles` (LEFT JOIN for owner_name)
- Filter: `organization_id` (enforced by RLS)

### Page Integration
Update `/app/tools/initiatives/page.tsx`:
- Replace `mockInitiatives` array with service call
- Update stats cards to use `getInitiativeStats()`
- Handle empty state with proper messaging
- Display objective relationships correctly
- Maintain existing UI/UX design

## Dependencies
- [ ] Task 001 completed (RLS infrastructure)
- [ ] Task 002 completed (RLS verification)
- Note: Needs objectives data for testing, but not code dependency

## Effort Estimate
- **Size**: S
- **Hours**: 2 hours
- **Parallel**: true (independent after foundation)

## Definition of Done
- [ ] Code implemented
- [ ] Multi-tenant tested with 2 organizations
- [ ] Empty state tested
- [ ] Performance benchmark met (<2s with 100+ records)
- [ ] Code reviewed
- [ ] TypeScript build passes with no errors
