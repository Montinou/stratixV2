---
name: Replace Database Client Throughout Codebase
status: open
created: 2025-09-23T20:50:51Z
updated: 2025-09-23T20:57:50Z
github: https://github.com/Montinou/stratixV2/issues/7
depends_on: [8, 10]
parallel: false
conflicts_with: [10]
---

# Task: Replace Database Client Throughout Codebase

## Description
Replace all Supabase client usage with PostgreSQL client (pg) throughout the entire codebase. Update all API routes, database connections, and queries to use the new NeonDB PostgreSQL connection.

## Acceptance Criteria
- [ ] All API routes in app/api/ updated to use PostgreSQL client
- [ ] Supabase client imports removed from all files
- [ ] PostgreSQL connection client implemented in lib/supabase/
- [ ] Database queries converted to use PostgreSQL syntax
- [ ] Connection pooling configured
- [ ] Error handling updated for PostgreSQL client
- [ ] All database operations tested and working

## Technical Details
- Install node-postgres (pg) package
- Create new database client in lib/supabase/client.ts (rename appropriately)
- Update all API routes to use PostgreSQL client instead of Supabase
- Convert Supabase-specific query syntax to standard SQL
- Implement connection pooling for performance
- Update error handling to work with PostgreSQL client
- Test all CRUD operations across the application

## Dependencies
- [ ] Schema migration scripts ready (Task #8)
- [ ] NeonAuth implementation complete (Task #10)
- [ ] Database schema deployed to staging

## Effort Estimate
- Size: XL
- Hours: 12-16 hours
- Parallel: false (depends on schema and auth completion)

## Definition of Done
- [ ] PostgreSQL client implemented and configured
- [ ] All API routes updated and tested
- [ ] Supabase client completely removed
- [ ] Database operations working correctly
- [ ] Connection pooling operational
- [ ] Error handling properly implemented
- [ ] All CRUD functionality verified
