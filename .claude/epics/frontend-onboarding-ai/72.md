---
name: AI Chat Integration with shadcn Components
status: open
created: 2025-09-27T19:31:29Z
updated: 2025-09-27T19:31:29Z
github: https://github.com/Montinou/stratixV2/issues/72
depends_on: [69, 71]
parallel: true
conflicts_with: []
effort: 16 hours (M)
---

# Task 004: AI Chat Integration with shadcn Components

## Overview

Implement a comprehensive AI chat system leveraging shadcn/ui components for consistent design and accessibility. Create floating chat interface, AI tooltips, and suggestion cards using shadcn primitives.

## Core Components

### 1. FloatingAIChat Component
**shadcn Components Used:**
- `Dialog` - Main chat modal with proper overlay and focus management
- `Sheet` - Alternative slide-out chat interface for mobile
- `Card` - Chat message containers with proper elevation
- `Button` - Action buttons with variants (primary, secondary, ghost)
- `ScrollArea` - Smooth scrolling chat history

```typescript
// Key shadcn integrations:
import { Dialog, DialogContent, DialogHeader } from "@/components/ui/dialog"
import { Sheet, SheetContent, SheetTrigger } from "@/components/ui/sheet"
import { Card, CardContent, CardHeader } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { ScrollArea } from "@/components/ui/scroll-area"
```

**Features:**
- Responsive design switching between Dialog (desktop) and Sheet (mobile)
- Chat bubble styling using shadcn Card components
- Proper keyboard navigation and accessibility
- Integration with existing shadcn theme variables

### 2. AITooltip Component
**shadcn Components Used:**
- `Tooltip` - Base tooltip functionality with proper positioning
- `TooltipProvider` - Context management for tooltip instances
- `Popover` - Rich content tooltips with interactive elements
- `Badge` - Status indicators and tags

```typescript
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from "@/components/ui/tooltip"
import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
import { Badge } from "@/components/ui/badge"
```

**Features:**
- Smart positioning using shadcn Tooltip primitives
- Rich content support via Popover for complex AI suggestions
- Contextual badges for AI confidence levels
- Consistent styling with shadcn CSS variables

### 3. AISuggestionCard Component
**shadcn Components Used:**
- `Card` with `CardHeader`, `CardContent`, `CardFooter` - Structured layout
- `Badge` - Suggestion categories and confidence indicators
- `Button` - Action buttons (apply, dismiss, learn more)
- `Progress` - AI confidence visualization
- `Separator` - Visual content separation

```typescript
import { Card, CardContent, CardFooter, CardHeader, CardTitle } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Progress } from "@/components/ui/progress"
import { Separator } from "@/components/ui/separator"
```

**Features:**
- Consistent card styling with shadcn design tokens
- Interactive buttons with proper hover and focus states
- Progress indicators using shadcn Progress component
- Responsive layout adapting to container width

### 4. Chat Interface Components
**shadcn Components Used:**
- `Input` - Message input with proper validation states
- `Avatar` - User and AI profile images with fallbacks
- `ScrollArea` - Chat history with smooth scrolling
- `Skeleton` - Loading states for AI responses
- `Alert` - Error and notification messages

```typescript
import { Input } from "@/components/ui/input"
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar"
import { Skeleton } from "@/components/ui/skeleton"
import { Alert, AlertDescription } from "@/components/ui/alert"
```

## Technical Implementation

### shadcn Theme Integration
- Utilize CSS custom properties for consistent theming
- Implement dark/light mode support via shadcn theme system
- Use `cn()` utility for conditional styling
- Leverage shadcn's responsive design patterns

### Component Composition
- Extend shadcn components using composition patterns
- Implement forwarded refs for proper component integration
- Use shadcn's variant system for component customization
- Follow shadcn naming conventions for props and styling

### Accessibility Features
- Implement ARIA labels using shadcn accessibility patterns
- Keyboard navigation following shadcn best practices
- Screen reader support via shadcn semantic structure
- Focus management using shadcn focus utilities

## Files to Create/Modify

### New Components
- `components/ai/FloatingAIChat.tsx` - Main chat interface
- `components/ai/AITooltip.tsx` - Contextual AI tooltips
- `components/ai/AISuggestionCard.tsx` - AI suggestion display
- `components/ai/ChatMessage.tsx` - Individual message component
- `components/ai/ChatInput.tsx` - Message input component

### shadcn Component Extensions
- `components/ui/chat-dialog.tsx` - Extended Dialog for chat
- `components/ui/suggestion-card.tsx` - Specialized Card variant
- `components/ui/ai-tooltip.tsx` - Enhanced Tooltip component

### Styling
- `styles/components/ai-chat.css` - Chat-specific CSS variables
- Integration with existing `globals.css` shadcn variables

## Testing Requirements

### Component Testing
- shadcn component prop forwarding
- Theme variable application
- Responsive behavior across breakpoints
- Accessibility compliance

### Integration Testing
- Chat flow with shadcn Dialog/Sheet switching
- Tooltip positioning and content display
- Suggestion card interactions
- Theme switching compatibility

## Dependencies

- All shadcn/ui components listed above
- Existing AI service integration (Task 003)
- Theme system and CSS variables (Task 001)
- React Hook Form integration for chat input

## Acceptance Criteria

1. **shadcn Component Usage**
   - ✅ All UI elements use appropriate shadcn components
   - ✅ Proper component composition and forwarded refs
   - ✅ Consistent styling with shadcn design tokens
   - ✅ Theme switching works across all components

2. **Chat Interface**
   - ✅ Floating chat toggles between Dialog and Sheet
   - ✅ Message history displays in shadcn ScrollArea
   - ✅ Input validation uses shadcn form patterns
   - ✅ Loading states use shadcn Skeleton components

3. **AI Integration**
   - ✅ Tooltips show contextual AI suggestions
   - ✅ Suggestion cards display AI recommendations
   - ✅ Confidence indicators use shadcn Progress
   - ✅ Error states use shadcn Alert components

4. **Accessibility**
   - ✅ ARIA compliance following shadcn patterns
   - ✅ Keyboard navigation works correctly
   - ✅ Screen reader compatibility
   - ✅ Focus management in modal states

## Implementation Notes

- Follow shadcn component patterns for customization
- Use CSS variables for all theming requirements
- Implement proper TypeScript types for component props
- Ensure mobile-first responsive design approach
- Test thoroughly with shadcn's theme switching functionality