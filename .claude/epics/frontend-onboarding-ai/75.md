---
name: shadcn Theme Integration & Accessibility
status: open
created: 2025-09-27T19:31:29Z
updated: 2025-09-27T19:31:29Z
github: https://github.com/Montinou/stratixV2/issues/75
depends_on: [72, 73]
parallel: true
conflicts_with: []
---

# Task 007: shadcn Theme Integration & Accessibility

## Overview
Implement comprehensive theme system using shadcn/ui's built-in theming capabilities and ensure full accessibility compliance following shadcn's accessible component patterns.

## Scope
- Dark/light mode implementation using shadcn's theme system
- Color system integration using shadcn CSS variables and design tokens
- Accessibility testing with shadcn's accessible component implementations
- Keyboard navigation following shadcn interaction patterns
- Screen reader compatibility with shadcn ARIA implementations

## Technical Requirements

### shadcn Theme System
- **CSS Variable Architecture**
  - Implement shadcn's complete color variable system
  - Use `--background`, `--foreground`, `--primary`, `--secondary` tokens
  - Leverage `--muted`, `--accent`, `--destructive` semantic colors
  - Implement `--border`, `--input`, `--ring` interaction colors

- **Theme Provider Integration**
  - Configure next-themes with shadcn's theme provider
  - Implement system, light, and dark theme options
  - Persist theme preferences across onboarding sessions
  - Handle theme transitions with shadcn's CSS animations

### Color System Implementation
- **Semantic Color Usage**
  - Primary colors for main actions and branding
  - Secondary colors for supporting elements
  - Muted colors for subtle backgrounds and text
  - Accent colors for highlights and CTAs
  - Destructive colors for errors and warnings

- **shadcn Component Theming**
  - Button variants with proper color mappings
  - Card backgrounds using muted/background tokens
  - Input states with border/ring color transitions
  - Text hierarchy using foreground/muted-foreground

### Accessibility Implementation
- **shadcn ARIA Patterns**
  - Form accessibility using shadcn's Label/Input associations
  - Dialog/Sheet accessibility with focus trap and escape handling
  - Progress accessibility with proper ARIA attributes
  - Button accessibility with loading and disabled states

- **Keyboard Navigation**
  - Tab order following shadcn's focusable element patterns
  - Arrow key navigation for multi-step interfaces
  - Escape key handling for modals and overlays
  - Enter/Space key activation for interactive elements

### Screen Reader Support
- **Content Structure**
  - Semantic HTML with proper heading hierarchy
  - ARIA landmarks for onboarding sections
  - Live regions for dynamic content updates
  - Alternative text for visual progress indicators

- **Interactive Feedback**
  - Screen reader announcements for step changes
  - Form validation messages with ARIA
  - Loading state announcements
  - Success/error feedback accessibility

## Implementation Details

### Theme Configuration
```typescript
// shadcn theme configuration
const themeConfig = {
  defaultTheme: "system",
  enableSystem: true,
  disableTransitionOnChange: false,
  themes: ["light", "dark"],
  storageKey: "onboarding-theme"
}
```

### CSS Variable Implementation
```css
/* shadcn dark theme variables */
.dark {
  --background: 224 71% 4%;
  --foreground: 213 31% 91%;
  --primary: 210 40% 98%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --muted: 223 47% 11%;
  --muted-foreground: 215.4 16.3% 56.9%;
  /* Complete shadcn color system */
}
```

### Required shadcn Components
- ThemeProvider (for theme management)
- Button (with theme-aware variants)
- Card (with proper background theming)
- Input/Label (with accessible associations)
- Progress (with ARIA attributes)
- Dialog/Sheet (with focus management)

### Accessibility Testing Setup
- **Automated Testing**
  - axe-core integration for accessibility auditing
  - jest-axe for component-level accessibility tests
  - Lighthouse accessibility scoring
  - WAVE tool validation

- **Manual Testing**
  - Screen reader testing (NVDA, JAWS, VoiceOver)
  - Keyboard-only navigation testing
  - Color contrast validation
  - Focus management verification

## Acceptance Criteria
- [ ] Theme switching works seamlessly using shadcn patterns
- [ ] All colors use shadcn CSS variables and semantic tokens
- [ ] WCAG 2.1 AA compliance achieved across all components
- [ ] Keyboard navigation works for entire onboarding flow
- [ ] Screen readers can navigate and understand all content
- [ ] Focus management follows shadcn accessibility patterns
- [ ] Color contrast meets accessibility standards in both themes
- [ ] Reduced motion preferences are respected

## Effort Estimate
**14 hours** (Medium-High complexity)
- Theme system implementation: 4 hours
- CSS variable integration: 3 hours
- Accessibility implementation: 5 hours
- Testing and validation: 2 hours

## Success Metrics
- 100% WCAG 2.1 AA compliance score
- Zero accessibility violations in automated testing
- Successful screen reader navigation
- Positive accessibility audit results
- Theme switching performance < 100ms
- Consistent color usage across all components