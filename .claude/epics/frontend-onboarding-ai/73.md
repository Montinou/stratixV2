---
name: Smart Form Components with shadcn Enhancement
status: open
created: 2025-09-27T19:31:29Z
updated: 2025-09-27T19:31:29Z
github: https://github.com/Montinou/stratixV2/issues/73
depends_on: [69, 70]
parallel: true
conflicts_with: []
effort: 18 hours (M)
---

# Task 005: Smart Form Components with shadcn Enhancement

## Overview

Develop intelligent form components that enhance user experience through AI-powered suggestions while maintaining full compatibility with shadcn/ui form primitives and react-hook-form integration.

## Core Components

### 1. SmartFormField Component
**shadcn Components Used:**
- `Form`, `FormControl`, `FormField`, `FormItem`, `FormLabel`, `FormMessage` - Complete form structure
- `Input` - Base input with validation states
- `Label` - Accessible form labels with proper association
- `Popover` - AI suggestion overlays
- `Alert` - Validation and AI feedback messages

```typescript
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from "@/components/ui/form"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
import { Alert, AlertDescription } from "@/components/ui/alert"
```

**Features:**
- Seamless react-hook-form integration using shadcn Form components
- Real-time AI suggestions via shadcn Popover
- Validation state styling using shadcn design tokens
- Error handling with shadcn Alert patterns

### 2. IndustrySelector Component
**shadcn Components Used:**
- `Select`, `SelectContent`, `SelectItem`, `SelectTrigger`, `SelectValue` - Dropdown functionality
- `Combobox` - Searchable industry selection with autocomplete
- `Card` - Visual industry category cards
- `Badge` - Industry tags and subcategories
- `Command` - Advanced search and filtering

```typescript
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from "@/components/ui/command"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
```

**Features:**
- Visual card-based industry selection using shadcn Cards
- Advanced search with shadcn Command component
- Multi-select capabilities with shadcn Badge display
- Industry hierarchy with nested shadcn Select components

### 3. DepartmentBuilder Component
**shadcn Components Used:**
- `Card` - Department cards with drag handles
- `Button` - Add, remove, and action buttons
- `Input` - Department name and description inputs
- `Dialog` - Department creation and editing modals
- `DropdownMenu` - Department action menus
- `Separator` - Visual separation between departments

```typescript
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from "@/components/ui/dialog"
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from "@/components/ui/dropdown-menu"
import { Separator } from "@/components/ui/separator"
```

**Features:**
- Drag & drop interface using shadcn Card components
- Department hierarchy visualization with shadcn layouts
- Inline editing with shadcn Dialog components
- Context menus using shadcn DropdownMenu

### 4. OKREditor Component
**shadcn Components Used:**
- `Textarea` - Multi-line objective and key result inputs
- `Dialog` - Full-screen OKR editing interface
- `Progress` - Key result progress visualization
- `Tabs` - Objective and key results organization
- `Calendar` - Date selection for deadlines
- `Slider` - Progress percentage adjustment

```typescript
import { Textarea } from "@/components/ui/textarea"
import { Dialog, DialogContent, DialogHeader } from "@/components/ui/dialog"
import { Progress } from "@/components/ui/progress"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Calendar } from "@/components/ui/calendar"
import { Slider } from "@/components/ui/slider"
```

**Features:**
- Rich text editing with shadcn Textarea components
- Progress tracking using shadcn Progress and Slider
- Date management with shadcn Calendar integration
- Tabbed organization using shadcn Tabs system

## shadcn Form Integration

### React Hook Form Compatibility
**shadcn Form Components:**
- `useForm` hook integration with shadcn Form wrapper
- Field registration using shadcn FormField component
- Validation display via shadcn FormMessage
- Form state management with shadcn FormControl

```typescript
import { useForm } from "react-hook-form"
import { zodResolver } from "@hookform/resolvers/zod"
import { Form, FormControl, FormField, FormItem } from "@/components/ui/form"

// Example integration pattern:
const form = useForm({
  resolver: zodResolver(formSchema),
  defaultValues: {}
})
```

### Validation Patterns
**shadcn Validation Components:**
- `FormMessage` - Error and validation feedback
- `Alert` - Form-level notifications
- `Input` with error states - Field-level validation styling
- `Badge` - Success and warning indicators

### Accessibility Features
**shadcn Accessibility Integration:**
- Proper ARIA labels via shadcn Label components
- Form association using shadcn FormItem structure
- Error announcement through shadcn FormMessage
- Keyboard navigation following shadcn patterns

## Advanced shadcn Features

### Theme Integration
- CSS custom properties for form styling consistency
- Dark/light mode support via shadcn theme system
- Component variants using shadcn's cva patterns
- Responsive design with shadcn breakpoint utilities

### Component Composition
- Extend shadcn form components using composition
- Custom variants while maintaining shadcn compatibility
- Forwarded refs for proper form library integration
- Consistent prop interfaces following shadcn conventions

### Animation and Transitions
- Use shadcn's built-in transition classes
- Loading states with shadcn Skeleton components
- Progressive disclosure using shadcn Collapsible
- Smooth interactions via shadcn animation utilities

## Files to Create/Modify

### Smart Form Components
- `components/forms/SmartFormField.tsx` - AI-enhanced form fields
- `components/forms/IndustrySelector.tsx` - Visual industry selection
- `components/forms/DepartmentBuilder.tsx` - Drag & drop department builder
- `components/forms/OKREditor.tsx` - Rich OKR editing interface

### shadcn Extensions
- `components/ui/smart-input.tsx` - Enhanced Input with AI suggestions
- `components/ui/visual-select.tsx` - Card-based Select component
- `components/ui/drag-card.tsx` - Draggable Card variant
- `components/ui/progress-editor.tsx` - Interactive Progress component

### Form Utilities
- `lib/forms/validation-schemas.ts` - Zod schemas for form validation
- `lib/forms/form-utils.ts` - Form helper functions
- `hooks/use-smart-form.ts` - Custom form hook with AI integration

### Styling
- `styles/components/forms.css` - Form-specific CSS variables
- Integration with shadcn form styling patterns

## Testing Requirements

### Component Testing
- shadcn form component integration
- React Hook Form compatibility
- AI suggestion functionality
- Theme and styling consistency

### Form Validation Testing
- Zod schema validation with shadcn display
- Error state handling
- Accessibility compliance
- Cross-browser form behavior

### Integration Testing
- Complete form workflows
- AI suggestion accuracy
- Performance with large datasets
- Mobile form interactions

## Dependencies

- React Hook Form with shadcn Form components
- Zod validation library
- All shadcn/ui form and input components
- AI service integration (Task 002)
- Existing theme system (Task 001)

## Acceptance Criteria

1. **shadcn Form Integration**
   - ✅ All form elements use shadcn components
   - ✅ React Hook Form properly integrated with shadcn Form
   - ✅ Validation states use shadcn styling patterns
   - ✅ Form accessibility follows shadcn standards

2. **Smart Form Features**
   - ✅ AI suggestions appear in shadcn Popover components
   - ✅ Industry selection uses shadcn Card/Select patterns
   - ✅ Department builder implements shadcn drag patterns
   - ✅ OKR editor uses shadcn Dialog/Tabs structure

3. **Visual Components**
   - ✅ Industry cards use consistent shadcn styling
   - ✅ Progress indicators use shadcn Progress component
   - ✅ All interactive elements use shadcn Button patterns
   - ✅ Loading states use shadcn Skeleton components

4. **Form Validation**
   - ✅ Error messages display via shadcn FormMessage
   - ✅ Success states use shadcn Badge/Alert components
   - ✅ Field validation follows shadcn form patterns
   - ✅ Accessibility compliance with screen readers

5. **Responsive Design**
   - ✅ Forms adapt using shadcn responsive patterns
   - ✅ Mobile interactions work with shadcn touch targets
   - ✅ Breakpoint handling follows shadcn conventions
   - ✅ Theme switching affects all form components

## Implementation Notes

- Prioritize shadcn component reuse over custom implementations
- Follow shadcn's composition patterns for component extension
- Use CSS variables for all custom styling requirements
- Implement proper TypeScript types extending shadcn component props
- Ensure all AI features degrade gracefully when unavailable
- Test thoroughly across different form sizes and complexity levels
- Maintain consistency with existing shadcn form patterns in the codebase