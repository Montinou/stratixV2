---
name: Migrate initiative form component to API endpoints  
status: completed
created: 2025-09-25T04:10:26Z
updated: 2025-09-25T04:49:06Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: true
conflicts_with: [001]
---

# Task: Migrate initiative form component to API endpoints

## Description
Update `/components/okr/initiative-form.tsx` to submit data via API endpoints instead of direct Supabase client calls. This form is critical for creating and editing initiatives.

## Acceptance Criteria
- [ ] Form submission works correctly for creating new initiatives
- [ ] Form submission works correctly for editing existing initiatives  
- [ ] Form validation is maintained and works as before
- [ ] Success and error messages display appropriately
- [ ] Loading states during submission work correctly
- [ ] Form resets properly after successful submission
- [ ] All form fields are properly validated and submitted

## Technical Details
**Implementation Approach:**
- Replace form submission logic to use `fetch('/api/initiatives')` with POST/PUT methods
- Update error handling to parse API error responses
- Maintain existing form validation logic
- Preserve existing UI/UX patterns for loading and success states

**Key Considerations:**
- Form should send JSON payload to API endpoints
- Handle both create (POST) and update (PUT) scenarios
- API expects specific field validation (required fields, data types)
- Success response includes created/updated initiative data

**Code Locations:**
- Primary: `/components/okr/initiative-form.tsx`
- Related: Any parent components that use this form

## Dependencies
- [ ] `/api/initiatives` POST and PUT endpoints (already exist)
- [ ] Form validation schema compatibility with API
- [ ] User authentication for form submission (already working)

## Effort Estimate
- Size: S
- Hours: 4-6 hours
- Parallel: true (can work alongside page migration)

## Definition of Done
- [ ] Form submissions work via API endpoints instead of Supabase client
- [ ] All form validation and error handling preserved  
- [ ] Manual testing completed - both create and edit scenarios
- [ ] TypeScript compilation successful with no new errors
- [ ] Form UX/UI unchanged from user perspective