---
name: Migrate insights page to analytics API endpoints
status: open
created: 2025-09-25T04:10:26Z
updated: 2025-09-25T04:10:26Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Migrate insights page to analytics API endpoints

## Description
Update `/app/insights/page.tsx` to use `/api/analytics` and related dashboard endpoints instead of direct Supabase client calls. This page provides business intelligence and OKR analytics.

## Acceptance Criteria
- [ ] Insights page loads with real analytics data (not mock data)
- [ ] Charts and visualizations display correctly with API data
- [ ] Performance metrics and KPIs calculate correctly
- [ ] Role-based data filtering works (shows appropriate scope of data)
- [ ] Date range filtering and analytics parameters work
- [ ] Loading states for data-intensive operations work correctly
- [ ] Error handling for analytics API failures implemented

## Technical Details
**Implementation Approach:**
- Replace analytics data fetching with `fetch('/api/analytics')` calls
- Update chart components to consume API data format
- Implement proper loading states for analytics calculations
- Maintain existing insights UI and chart library integration

**Key Considerations:**
- Analytics API may involve more complex queries and longer response times
- Data aggregation and calculations happen server-side
- Role-based filtering affects which data users can see in insights
- API supports date range parameters and filtering options

**Code Locations:**
- Primary: `/app/insights/page.tsx`
- Related: Analytics components, charts, and data visualization components

## Dependencies
- [ ] `/api/analytics` endpoints (already exist and functional)
- [ ] Dashboard data aggregation services (already operational)
- [ ] Role-based data access controls (already implemented)

## Effort Estimate
- Size: M
- Hours: 6-10 hours
- Parallel: true (independent of other page migrations)

## Definition of Done
- [ ] Insights page fully functional via analytics API endpoints
- [ ] All charts and visualizations working with real data
- [ ] Analytics calculations accurate and performant
- [ ] Manual testing completed for different user roles and date ranges
- [ ] TypeScript compilation successful with no errors