---
name: Migrate team management page to API endpoints
status: open
created: 2025-09-25T04:10:26Z
updated: 2025-09-25T04:10:26Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Migrate team management page to API endpoints

## Description
Update `/app/team/page.tsx` to use `/api/users` and `/api/profiles` endpoints instead of direct Supabase client calls. This page allows managers to view and manage their team members.

## Acceptance Criteria
- [ ] Team page loads and displays real team member data
- [ ] User list filtered correctly by department/role permissions
- [ ] Team member profile information displays correctly
- [ ] Role-based filtering works (gerente sees department, corporativo sees all)
- [ ] Team member status and activity information loads correctly
- [ ] Search and filtering functionality works via API
- [ ] Loading states and error handling implemented

## Technical Details
**Implementation Approach:**
- Replace team data fetching with `fetch('/api/users')` and `fetch('/api/profiles')`
- Implement proper role-based filtering in API calls
- Update team member display components to use API data format
- Maintain existing team management UI patterns

**Key Considerations:**
- API responses include user profiles with company/department relationships
- Role-based filtering applied server-side based on current user permissions
- Team data includes both user account info and profile details
- Response format: `{ data: T, status: 200 }` or `{ error: string, status: 4xx }`

**Code Locations:**
- Primary: `/app/team/page.tsx`
- Related: Team member components and profile displays

## Dependencies
- [ ] `/api/users` and `/api/profiles` endpoints (already exist)
- [ ] Role-based authorization system (already operational)
- [ ] User profile relationships in database (already established)

## Effort Estimate
- Size: M
- Hours: 6-8 hours
- Parallel: true (independent of other page migrations)

## Definition of Done
- [ ] Team page fully functional via API endpoints
- [ ] Role-based team filtering working correctly
- [ ] All team member information displaying properly
- [ ] Manual testing completed for different user roles
- [ ] TypeScript compilation successful with no errors