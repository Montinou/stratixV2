---
name: Migrate initiatives page from Supabase client to API endpoints
status: open
created: 2025-09-25T04:10:26Z
updated: 2025-09-25T04:10:26Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: true
conflicts_with: [002]
---

# Task: Migrate initiatives page from Supabase client to API endpoints

## Description
Replace direct Supabase client calls in `/app/initiatives/page.tsx` with API endpoint calls to `/api/initiatives`. This is the highest priority task as initiatives are core OKR functionality currently broken in production.

## Acceptance Criteria
- [ ] Initiatives page loads without errors and displays real data (not mock data)
- [ ] List view shows all initiatives with proper filtering by user role
- [ ] Create initiative functionality works through API endpoints
- [ ] Edit initiative functionality works through API endpoints
- [ ] Delete initiative functionality works through API endpoints
- [ ] Loading states and error handling work correctly
- [ ] Role-based access control is maintained (empleado/gerente/corporativo)

## Technical Details
**Implementation Approach:**
- Replace `supabase.from('initiatives')` calls with `fetch('/api/initiatives')` 
- Update React state management to handle API responses
- Implement proper error boundaries for API failures
- Maintain existing UI/UX patterns and loading states

**Key Considerations:**
- API endpoints already exist and are fully functional
- Response format: `{ success: boolean, data?: T, error?: string }`
- Authentication handled server-side via NeonAuth
- Role-based filtering applied automatically in API

**Code Locations:**
- Primary: `/app/initiatives/page.tsx`
- Related: Components that render initiative lists and details

## Dependencies
- [ ] NeonAuth authentication system (already operational)
- [ ] `/api/initiatives` endpoints (already exist and tested)
- [ ] User profile system for role-based access (already working)

## Effort Estimate
- Size: M
- Hours: 8-12 hours  
- Parallel: true (independent of other page migrations)

## Definition of Done
- [ ] Code implemented and Supabase client calls removed
- [ ] Manual testing completed - all CRUD operations functional
- [ ] Error handling consistent with existing API patterns
- [ ] TypeScript compilation successful with no new errors
- [ ] Page performance maintained or improved